plugins {
    id 'java'
    id 'maven-publish'
}

sourceCompatibility = 1.8
group = "dk.aaue.sna"
version = "git describe --tags --dirty".execute().text.trim()

repositories {
    mavenCentral()
    maven { url "https://conjars.org/repo" }
}

dependencies {
    implementation 'org.jgrapht:jgrapht-core:1.0.1'
    implementation 'org.jgrapht:jgrapht-ext:1.0.1'
    testImplementation 'junit:junit:4.8.2'
    implementation 'org.apache.commons:commons-io:1.3.2'
    implementation 'commons-logging:commons-logging:1.1.1'
    implementation 'org.apache.commons:commons-math:2.2'
    implementation 'fuzzy4j:fuzzy4j:1.3-SNAPSHOT'
}

wrapper {
    gradleVersion = "6.1.1"
}

publishing {
    publications {
        dist(MavenPublication) {
            from components.java
        }
    }
    repositories {
        maven {
            url = "https://conjars.org/repo"
            credentials {
                username = System.getenv("CONJARS_USERNAME")
                password = System.getenv("CONJARS_PASSWORD")
            }
        }
    }
}

tasks.withType(GenerateModuleMetadata) {
    enabled = false
}
